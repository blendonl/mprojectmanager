model Agenda {
  id String @id @default(uuid())

  date DateTime

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  items AgendaItem[]
}

enum AgendaItemStatus {
  PENDING
  COMPLETED
  CANCELLED
  UNFINISHED
}

enum AgendaItemType {
  TASK
  MEETING
  MILESTONE
}

model AgendaItem {
  id       String @id @default(uuid())
  agendaId String @map("agenda_id")
  taskId   String @map("task_id")

  type AgendaItemType @default(TASK)

  status   AgendaItemStatus @default(PENDING)
  startAt  DateTime?        @map("start_at")
  duration Int?
  position Int              @default(0)

  notes          String?
  completedAt    DateTime? @map("completed_at")
  notificationId String?   @map("notification_id")

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  agenda Agenda @relation(fields: [agendaId], references: [id], onDelete: Cascade)
  task   Task   @relation(fields: [taskId], references: [id], onDelete: SetNull)
}
